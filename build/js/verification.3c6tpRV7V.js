(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var i=e.n(t);!function(){const e=PRHelper.getHTML(),t=PRHelper.getType(),n=PRHelper.getHook(),r=PRHelper.getRequest(),o=PRHelper.getSetting();let a="email-verification",l=i()(`.modal#${a}`);function s(t,i,n="warning"){e.isElement(i)&&PRFrontendHelper.getHTML().alert(i,{content:t,replace:!0,type:n})}t.isEmpty(l)&&(a="password-verification",l=i()(`.modal#${a}`)),t.isEmpty(l)||(n.on("DOMContentLoaded",(()=>{l.modal("show")})),n.on("click",(i=>{i.preventDefault();let n=null,c=e.getTarget(i).closest(".modal-body"),d=e.getElement('[data-field-id="message_wrapper"]',c),p=e.getElement("#verification_pin",c),g=o.getOption("verification.current_page");if(e.isElement(p)){let i=e.getValue(p);if(t.isEmpty(i)||4!=i.length)n="code_not_valid";else{let t=e.getElement(".pr-spinner",c);e.show(t),r.ajax(o.getOption(`verification.ajax.${a}`)).onSuccess((t=>{if("email-verification"===a)if("checkout"===g)l.modal("hide"),s(t,e.getElement(".woocommerce-notices-wrapper"));else window.location.href=o.getOption("verification.redirect_url");else e.fadeIn(c,{start:()=>{e.replace(`<div>${t}</div>`,c)}})})).onError((e=>{s(e,d)})).onFinally((()=>{e.hide(t)})).addNonce().send({pin:i,page:g})}}else n="refresh_page";if(null!==n){let e=o.getOption(`verification.errors.${n}`);t.isEmpty(e)||s(e,d)}}),`#${a} button#verify_code`),n.bubbling("click",(t=>{t.preventDefault();let i=e.getTarget(t).closest(".modal-body"),n=e.getElement('[data-field-id="message_wrapper"]',i),l=e.getElement(".pr-spinner",i);e.show(l),r.ajax(o.getOption(`verification.ajax.resend.${a}`)).onSuccess((t=>{let r=e.getElement(".expiration",i);s(t.message,n,"success"),e.fadeIn(r,{start:()=>{e.replace(`<div>${t.expiration}</div>`,r)}})})).onError((e=>{s(e,n)})).onFinally((()=>{e.hide(l)})).addNonce().send()}),"#verification_send_again"))}()})();